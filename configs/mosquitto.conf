# Mosquitto MQTT Broker Configuration
# For Home Media and Automation Center


# ================================
# Network Settings
# ================================
# Standard MQTT port
listener 1883
protocol mqtt


# WebSocket support (for web clients)
listener 9001
protocol websockets


# ================================
# Persistence
# ================================
# Enable message persistence
persistence true
persistence_location /mosquitto/data/


# Save in-memory database every 5 minutes
autosave_interval 300


# ================================
# Logging
# ================================
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout


# Log types: error, warning, notice, information, all
log_type all


# Log timestamp format
log_timestamp true
log_timestamp_format %Y-%m-%d %H:%M:%S


# ================================
# Security
# ================================
# Require authentication
allow_anonymous false


# Password file (create with mosquitto_passwd)
password_file /mosquitto/config/passwd


# ================================
# Access Control
# ================================
# ACL file for topic-based permissions (optional)
# acl_file /mosquitto/config/acl


# ================================
# Connection Limits
# ================================
# Maximum concurrent connections
max_connections 100


# Maximum QoS (0, 1, or 2)
max_qos 2


# Maximum queued messages per client
max_queued_messages 1000


# ================================
# Retained Messages
# ================================
# Maximum number of retained messages
max_inflight_messages 20
max_queued_bytes 0


# ================================
# WebSocket Settings
# ================================
# Additional websocket settings if needed
# websockets_log_level 255
